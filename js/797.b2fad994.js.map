{"version":3,"file":"js/797.b2fad994.js","mappings":"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","sources":["webpack://vue-shop/./src/components/power/Roles.vue","webpack://vue-shop/src/components/power/Roles.vue","webpack://vue-shop/./src/components/power/Roles.vue?fd0e","webpack://vue-shop/./src/components/power/Roles.vue?a0df"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('el-breadcrumb',{attrs:{\"separator-class\":\"el-icon-arrow-right\"}},[_c('el-breadcrumb-item',{attrs:{\"to\":{ path: '/home' }}},[_vm._v(\"首页\")]),_c('el-breadcrumb-item',[_vm._v(\"权限管理\")]),_c('el-breadcrumb-item',[_vm._v(\"角色列表\")])],1),_c('el-card',[_c('el-row',[_c('el-col',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.addRoles}},[_vm._v(\"添加角色\")])],1)],1),_c('el-table',{attrs:{\"data\":_vm.rolesList,\"border\":\"\",\"stripe\":\"\"}},[_c('el-table-column',{attrs:{\"type\":\"expand\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return _vm._l((scope.row.children),function(item1,i1){return _c('el-row',{key:item1.id,class:['elBottom', i1 === 0 ? 'elTop' : '', 'vcenter']},[_c('el-col',{attrs:{\"span\":5}},[_c('el-tag',{attrs:{\"closable\":\"\"},on:{\"close\":function($event){return _vm.removeTagById(scope.row, item1.id)}}},[_vm._v(\" \"+_vm._s(item1.authName)+\" \")]),_c('i',{staticClass:\"el-icon-caret-right\"})],1),_c('el-col',{attrs:{\"span\":19}},_vm._l((item1.children),function(item2,i2){return _c('el-row',{key:item2.id,class:[i2 === 0 ? '' : 'elTop', 'vcenter']},[_c('el-col',{attrs:{\"span\":6}},[_c('el-tag',{attrs:{\"type\":\"success\",\"closable\":\"\"},on:{\"close\":function($event){return _vm.removeTagById(scope.row, item2.id)}}},[_vm._v(_vm._s(item2.authName))]),_c('i',{staticClass:\"el-icon-caret-right\"})],1),_c('el-col',{attrs:{\"span\":18}},_vm._l((item2.children),function(item3){return _c('el-tag',{key:item3.id,attrs:{\"closable\":\"\",\"type\":\"warning\"},on:{\"close\":function($event){return _vm.removeTagById(scope.row, item3.id)}}},[_vm._v(_vm._s(item3.authName))])}),1)],1)}),1)],1)})}}])}),_c('el-table-column',{attrs:{\"type\":\"index\",\"label\":\"#\"}}),_c('el-table-column',{attrs:{\"label\":\"角色名称\",\"prop\":\"roleName\"}}),_c('el-table-column',{attrs:{\"label\":\"角色描述\",\"prop\":\"roleDesc\"}}),_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-edit\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.editRole(scope.row.id)}}},[_vm._v(\"编辑\")]),_c('el-button',{attrs:{\"type\":\"danger\",\"icon\":\"el-icon-delete\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.delRole(scope.row.id)}}},[_vm._v(\"删除\")]),_c('el-button',{attrs:{\"type\":\"warning\",\"icon\":\"el-icon-setting\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.showSetRightsDialog(scope.row)}}},[_vm._v(\"分配权限\")])]}}])})],1)],1),_c('el-dialog',{attrs:{\"title\":\"分配权限\",\"visible\":_vm.setRightDialogVisible,\"width\":\"50%\"},on:{\"update:visible\":function($event){_vm.setRightDialogVisible=$event},\"close\":function($event){_vm.defArray = []}}},[_c('el-tree',{ref:\"treeRef\",attrs:{\"data\":_vm.setRightList,\"props\":_vm.treeProps,\"show-checkbox\":\"\",\"node-key\":\"id\",\"default-expand-all\":\"\",\"default-checked-keys\":_vm.defArray}}),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.setRightDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.allowRights}},[_vm._v(\"确 定\")])],1)],1),_c('el-dialog',{attrs:{\"title\":\"添加角色\",\"visible\":_vm.addRoleDialogVisible,\"width\":\"50%\"},on:{\"update:visible\":function($event){_vm.addRoleDialogVisible=$event},\"close\":_vm.addRoleDialogClose}},[_c('el-form',{ref:\"addRoleFormRef\",attrs:{\"model\":_vm.addRoleForm,\"rules\":_vm.addRoleRules,\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"label\":\"角色名称\",\"prop\":\"roleName\"}},[_c('el-input',{model:{value:(_vm.addRoleForm.roleName),callback:function ($$v) {_vm.$set(_vm.addRoleForm, \"roleName\", $$v)},expression:\"addRoleForm.roleName\"}})],1),_c('el-form-item',{attrs:{\"label\":\"角色描述\",\"prop\":\"roleDesc\"}},[_c('el-input',{model:{value:(_vm.addRoleForm.roleDesc),callback:function ($$v) {_vm.$set(_vm.addRoleForm, \"roleDesc\", $$v)},expression:\"addRoleForm.roleDesc\"}})],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.addRoleDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.addRoleTrue}},[_vm._v(\"确 定\")])],1)],1),_c('el-dialog',{attrs:{\"title\":\"编辑角色\",\"visible\":_vm.editRoleDialogVisible,\"width\":\"50%\"},on:{\"update:visible\":function($event){_vm.editRoleDialogVisible=$event}}},[_c('el-form',{ref:\"editRoleFormRef\",attrs:{\"model\":_vm.editRoleMessage,\"rules\":_vm.addRoleRules,\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"label\":\"角色名称\",\"prop\":\"roleName\"}},[_c('el-input',{model:{value:(_vm.editRoleMessage.roleName),callback:function ($$v) {_vm.$set(_vm.editRoleMessage, \"roleName\", $$v)},expression:\"editRoleMessage.roleName\"}})],1),_c('el-form-item',{attrs:{\"label\":\"角色描述\",\"prop\":\"roleDesc\"}},[_c('el-input',{model:{value:(_vm.editRoleMessage.roleDesc),callback:function ($$v) {_vm.$set(_vm.editRoleMessage, \"roleDesc\", $$v)},expression:\"editRoleMessage.roleDesc\"}})],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.editRoleDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.editRoleTrue}},[_vm._v(\"确 定\")])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n      <el-breadcrumb-item :to=\"{ path: '/home' }\">首页</el-breadcrumb-item>\r\n      <el-breadcrumb-item>权限管理</el-breadcrumb-item>\r\n      <el-breadcrumb-item>角色列表</el-breadcrumb-item>\r\n    </el-breadcrumb>\r\n    <el-card>\r\n      <el-row>\r\n        <el-col>\r\n          <el-button type=\"primary\" @click=\"addRoles\">添加角色</el-button>\r\n        </el-col>\r\n      </el-row>\r\n      <el-table :data=\"rolesList\" border stripe>\r\n        <el-table-column type=\"expand\">\r\n          <template slot-scope=\"scope\">\r\n            <el-row\r\n              v-for=\"(item1, i1) in scope.row.children\"\r\n              :key=\"item1.id\"\r\n              :class=\"['elBottom', i1 === 0 ? 'elTop' : '', 'vcenter']\"\r\n            >\r\n              <el-col :span=\"5\">\r\n                <el-tag closable @close=\"removeTagById(scope.row, item1.id)\">\r\n                  {{ item1.authName }}\r\n                </el-tag>\r\n                <i class=\"el-icon-caret-right\"></i\r\n              ></el-col>\r\n              <el-col :span=\"19\">\r\n                <el-row\r\n                  v-for=\"(item2, i2) in item1.children\"\r\n                  :key=\"item2.id\"\r\n                  :class=\"[i2 === 0 ? '' : 'elTop', 'vcenter']\"\r\n                >\r\n                  <el-col :span=\"6\"\r\n                    ><el-tag\r\n                      type=\"success\"\r\n                      closable\r\n                      @close=\"removeTagById(scope.row, item2.id)\"\r\n                      >{{ item2.authName }}</el-tag\r\n                    >\r\n                    <i class=\"el-icon-caret-right\"></i\r\n                  ></el-col>\r\n                  <el-col :span=\"18\">\r\n                    <el-tag\r\n                      closable\r\n                      type=\"warning\"\r\n                      v-for=\"item3 in item2.children\"\r\n                      :key=\"item3.id\"\r\n                      @close=\"removeTagById(scope.row, item3.id)\"\r\n                      >{{ item3.authName }}</el-tag\r\n                    >\r\n                  </el-col>\r\n                </el-row></el-col\r\n              >\r\n            </el-row>\r\n            <!-- <pre>\r\n                    {{ scope.row }}\r\n                </pre\r\n            > -->\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column type=\"index\" label=\"#\"></el-table-column>\r\n        <el-table-column label=\"角色名称\" prop=\"roleName\"></el-table-column>\r\n        <el-table-column label=\"角色描述\" prop=\"roleDesc\"></el-table-column>\r\n        <el-table-column label=\"操作\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button\r\n              type=\"primary\"\r\n              icon=\"el-icon-edit\"\r\n              size=\"mini\"\r\n              @click=\"editRole(scope.row.id)\"\r\n              >编辑</el-button\r\n            >\r\n            <el-button\r\n              type=\"danger\"\r\n              icon=\"el-icon-delete\"\r\n              size=\"mini\"\r\n              @click=\"delRole(scope.row.id)\"\r\n              >删除</el-button\r\n            >\r\n            <el-button\r\n              type=\"warning\"\r\n              icon=\"el-icon-setting\"\r\n              size=\"mini\"\r\n              @click=\"showSetRightsDialog(scope.row)\"\r\n              >分配权限</el-button\r\n            >\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n    </el-card>\r\n    <!-- 分配权限对话框 -->\r\n    <el-dialog\r\n      title=\"分配权限\"\r\n      :visible.sync=\"setRightDialogVisible\"\r\n      width=\"50%\"\r\n      @close=\"defArray = []\"\r\n    >\r\n      <el-tree\r\n        :data=\"setRightList\"\r\n        :props=\"treeProps\"\r\n        show-checkbox\r\n        node-key=\"id\"\r\n        default-expand-all\r\n        :default-checked-keys=\"defArray\"\r\n        ref=\"treeRef\"\r\n      ></el-tree>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"setRightDialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"allowRights\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n    <!-- 添加角色对话框 -->\r\n    <el-dialog\r\n      title=\"添加角色\"\r\n      :visible.sync=\"addRoleDialogVisible\"\r\n      width=\"50%\"\r\n      @close=\"addRoleDialogClose\"\r\n    >\r\n      <el-form\r\n        ref=\"addRoleFormRef\"\r\n        :model=\"addRoleForm\"\r\n        :rules=\"addRoleRules\"\r\n        label-width=\"80px\"\r\n      >\r\n        <el-form-item label=\"角色名称\" prop=\"roleName\">\r\n          <el-input v-model=\"addRoleForm.roleName\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"角色描述\" prop=\"roleDesc\">\r\n          <el-input v-model=\"addRoleForm.roleDesc\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"addRoleDialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"addRoleTrue\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n    <el-dialog\r\n      title=\"编辑角色\"\r\n      :visible.sync=\"editRoleDialogVisible\"\r\n      width=\"50%\"\r\n    >\r\n      <el-form\r\n        ref=\"editRoleFormRef\"\r\n        :model=\"editRoleMessage\"\r\n        :rules=\"addRoleRules\"\r\n        label-width=\"80px\"\r\n      >\r\n        <el-form-item label=\"角色名称\" prop=\"roleName\">\r\n          <el-input v-model=\"editRoleMessage.roleName\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"角色描述\" prop=\"roleDesc\">\r\n          <el-input v-model=\"editRoleMessage.roleDesc\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"editRoleDialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"editRoleTrue\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      rolesList: [],\r\n      setRightDialogVisible: false,\r\n      setRightList: [],\r\n      treeProps: {\r\n        label: \"authName\",\r\n        children: \"children\",\r\n      },\r\n      defArray: [],\r\n      //   用户权限id\r\n      roleID: \"\",\r\n      addRoleDialogVisible: false,\r\n      addRoleForm: {\r\n        roleName: \"\",\r\n        roleDesc: \"\",\r\n      },\r\n      addRoleRules: {\r\n        roleName: [\r\n          { required: true, message: \"请输入角色名称\", trigger: \"blur\" },\r\n        ],\r\n        roleDesc: [{ message: \"请输入角色描述\", trigger: \"blur\" }],\r\n      },\r\n      editRoleDialogVisible: false,\r\n      editRoleMessage: {},\r\n    };\r\n  },\r\n  created() {\r\n    this.getRolesList();\r\n  },\r\n  methods: {\r\n    async getRolesList() {\r\n      const { data: res } = await this.$http.get(\"roles\");\r\n      if (res.meta.status !== 200) {\r\n        this.$message.error(\"角色列表获取失败\");\r\n      }\r\n      this.rolesList = res.data;\r\n      console.log(this.rolesList);\r\n    },\r\n    async removeTagById(role, reid) {\r\n      const removeTag = await this.$confirm(\r\n        \"此操作将永久删除该文件, 是否继续?\",\r\n        \"提示\",\r\n        {\r\n          confirmButtonText: \"确定\",\r\n          cancelButtonText: \"取消\",\r\n          type: \"warning\",\r\n        }\r\n      ).catch((err) => err);\r\n      if (removeTag !== \"confirm\") {\r\n        this.$message.info(\"已取消删除\");\r\n      }\r\n      const { data: res } = await this.$http\r\n        .delete(`roles/${role.id}/rights/${reid}\r\n      \r\n`);\r\n      if (res.meta.status !== 200) {\r\n        this.$message.error(\"删除权限失败\");\r\n      }\r\n      role.children = res.data;\r\n    },\r\n    // 分配权限\r\n    async showSetRightsDialog(role) {\r\n      const { data: res } = await this.$http.get(`rights/tree`);\r\n      if (res.meta.status !== 200) {\r\n        this.$message.error(\"获取权限列表失败\");\r\n      }\r\n      this.setRightList = res.data;\r\n      console.log(this.setRightList);\r\n      this.getLeafKeys(role, this.defArray);\r\n      this.roleID = role.id;\r\n\r\n      this.setRightDialogVisible = true;\r\n    },\r\n    // 通过递归的形式，将角色下所有三级权限下的id，保存到defkey数组中\r\n    getLeafKeys(node, arr) {\r\n      if (!node.children) {\r\n        return arr.push(node.id);\r\n      }\r\n      node.children.forEach((item) => this.getLeafKeys(item, arr));\r\n    },\r\n    async allowRights() {\r\n      const keys = [\r\n        ...this.$refs.treeRef.getCheckedKeys(),\r\n        ...this.$refs.treeRef.getHalfCheckedKeys(),\r\n      ];\r\n      const idStr = keys.join(\",\");\r\n      const { data: res } = await this.$http.post(\r\n        `roles/${this.roleID}/rights`,\r\n        { rids: idStr }\r\n      );\r\n      if (res.meta.status !== 200) {\r\n        this.$message.error(\"分配权限失败\");\r\n      }\r\n      this.getRolesList();\r\n\r\n      this.$message.success(\"分配权限成功 \");\r\n      this.setRightDialogVisible = false;\r\n    },\r\n    addRoles() {\r\n      this.addRoleDialogVisible = true;\r\n    },\r\n    addRoleTrue() {\r\n      console.log(this.addRoleForm.roleName);\r\n      this.$refs.addRoleFormRef.validate(async (valid) => {\r\n        if (!valid) return;\r\n        const { data: res } = await this.$http.post(\"roles\", this.addRoleForm);\r\n        if (res.meta.status !== 201) {\r\n          this.$message.error(\"添加角色失败\");\r\n        }\r\n        this.$message.success(\"添加角色成功\");\r\n        this.getRolesList();\r\n        this.addRoleDialogVisible = false;\r\n      });\r\n    },\r\n    addRoleDialogClose() {\r\n      this.$refs.addRoleFormRef.resetFields();\r\n    },\r\n    async editRole(id) {\r\n      const { data: res } = await this.$http.get(`roles/${id}`);\r\n      if (res.meta.status !== 200) {\r\n        this.$message.error(\"获取角色信息失败\");\r\n      }\r\n      this.editRoleMessage = res.data;\r\n      console.log(this.editRoleMessage);\r\n      this.editRoleDialogVisible = true;\r\n    },\r\n    editRoleTrue() {\r\n      this.$refs.editRoleFormRef.validate(async (vaild) => {\r\n        if (!vaild) return;\r\n        const { data: res } = await this.$http.put(\r\n          `roles/${this.editRoleMessage.roleId}`,\r\n          {\r\n            roleName: this.editRoleMessage.roleName,\r\n            roleDesc: this.editRoleMessage.roleDesc,\r\n          }\r\n        );\r\n        console.log(res);\r\n\r\n        if (res.meta.status !== 200) {\r\n          this.$message.error(\"编辑角色失败\");\r\n        } else {\r\n          this.$message.success(\"编辑角色成功\");\r\n          this.getRolesList();\r\n          this.editRoleDialogVisible = false;\r\n        }\r\n      });\r\n    },\r\n    async delRole(id) {\r\n      const { data: res } = await this.$http.delete(`roles/${id}`);\r\n      if (res.meta.status !== 200) {\r\n        this.$message.error(\"删除角色信息失败\");\r\n      }\r\n      this.getRolesList();\r\n      this.$message.success(\"删除角色成功\");\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.el-tag {\r\n  margin: 7px;\r\n}\r\n.elTop {\r\n  border-top: 1px solid #eee;\r\n}\r\n.elBottom {\r\n  border-bottom: 1px solid #eee;\r\n}\r\n.vcenter {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Roles.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Roles.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Roles.vue?vue&type=template&id=947241ba&scoped=true&\"\nimport script from \"./Roles.vue?vue&type=script&lang=js&\"\nexport * from \"./Roles.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Roles.vue?vue&type=style&index=0&id=947241ba&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"947241ba\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","attrs","path","_v","on","addRoles","rolesList","scopedSlots","_u","key","fn","scope","_l","row","children","item1","i1","id","class","$event","removeTagById","_s","authName","staticClass","item2","i2","item3","editRole","delRole","showSetRightsDialog","setRightDialogVisible","defArray","ref","setRightList","treeProps","slot","allowRights","addRoleDialogVisible","addRoleDialogClose","addRoleForm","addRoleRules","model","value","roleName","callback","$$v","$set","expression","roleDesc","addRoleTrue","editRoleDialogVisible","editRoleMessage","editRoleTrue","staticRenderFns","data","label","roleID","required","message","trigger","created","methods","confirmButtonText","cancelButtonText","type","catch","err","delete","role","getLeafKeys","node","rids","component"],"sourceRoot":""}