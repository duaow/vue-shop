{"version":3,"file":"js/276.27165a99.js","mappings":"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","sources":["webpack://vue-shop/./src/components/users/User.vue","webpack://vue-shop/src/components/users/User.vue","webpack://vue-shop/./src/components/users/User.vue?ea8a","webpack://vue-shop/./src/components/users/User.vue?c926"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('el-breadcrumb',{attrs:{\"separator-class\":\"el-icon-arrow-right\"}},[_c('el-breadcrumb-item',{attrs:{\"to\":{ path: '/home' }}},[_vm._v(\"首页\")]),_c('el-breadcrumb-item',[_vm._v(\"用户管理\")]),_c('el-breadcrumb-item',[_vm._v(\"用户列表\")])],1),_c('el-card',{staticClass:\"box-card\"},[_c('el-row',{attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":8}},[_c('el-input',{attrs:{\"placeholder\":\"请输入内容\",\"clearable\":\"\"},on:{\"change\":function($event){return _vm.getUSerList()}},model:{value:(_vm.usersInfo.query),callback:function ($$v) {_vm.$set(_vm.usersInfo, \"query\", $$v)},expression:\"usersInfo.query\"}},[_c('el-button',{attrs:{\"slot\":\"append\",\"icon\":\"el-icon-search\"},on:{\"click\":function($event){return _vm.getUSerList()}},slot:\"append\"})],1)],1),_c('el-col',{attrs:{\"span\":4}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.addDialogVisible = true}}},[_vm._v(\"添加用户\")])],1)],1),_c('el-table',{attrs:{\"data\":_vm.userList,\"stripe\":\"\",\"border\":\"\"}},[_c('el-table-column',{attrs:{\"type\":\"index\",\"label\":\"#\"}}),_c('el-table-column',{attrs:{\"prop\":\"username\",\"label\":\"姓名\"}}),_c('el-table-column',{attrs:{\"prop\":\"email\",\"label\":\"邮箱\"}}),_c('el-table-column',{attrs:{\"prop\":\"mobile\",\"label\":\"电话\"}}),_c('el-table-column',{attrs:{\"prop\":\"role_name\",\"label\":\"角色\"}}),_c('el-table-column',{attrs:{\"label\":\"状态\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-switch',{on:{\"change\":function($event){return _vm.userStatusChange(scope.row)}},model:{value:(scope.row.mg_state),callback:function ($$v) {_vm.$set(scope.row, \"mg_state\", $$v)},expression:\"scope.row.mg_state\"}})]}}])}),_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',_vm._b({attrs:{\"type\":\"primary\",\"icon\":\"el-icon-edit\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.showEditDialog(scope.row.id)}}},'el-button',scope.row,false)),_c('el-button',{attrs:{\"type\":\"danger\",\"icon\":\"el-icon-delete\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.deleteUserInfo(scope.row.id)}}}),_c('el-tooltip',{staticClass:\"item\",attrs:{\"effect\":\"dark\",\"content\":\"分配角色\",\"placement\":\"top\",\"enterable\":false}},[_c('el-button',{attrs:{\"type\":\"warning\",\"icon\":\"el-icon-setting\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.setRole(scope.row)}}})],1)]}}])})],1),_c('el-pagination',{attrs:{\"current-page\":_vm.usersInfo.pagenum,\"page-sizes\":[1, 2, 5, 10],\"page-size\":_vm.usersInfo.pagesize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1),_c('el-dialog',{attrs:{\"title\":\"添加用户\",\"visible\":_vm.addDialogVisible,\"width\":\"50%\"},on:{\"update:visible\":function($event){_vm.addDialogVisible=$event},\"close\":_vm.addDialogClose}},[_c('el-form',{ref:\"addRuleForm\",attrs:{\"model\":_vm.addForm,\"rules\":_vm.addFormRules,\"label-width\":\"70px\"}},[_c('el-form-item',{attrs:{\"label\":\"用户名\",\"prop\":\"username\"}},[_c('el-input',{model:{value:(_vm.addForm.username),callback:function ($$v) {_vm.$set(_vm.addForm, \"username\", $$v)},expression:\"addForm.username\"}})],1),_c('el-form-item',{attrs:{\"label\":\"密码\",\"prop\":\"password\"}},[_c('el-input',{model:{value:(_vm.addForm.password),callback:function ($$v) {_vm.$set(_vm.addForm, \"password\", $$v)},expression:\"addForm.password\"}})],1),_c('el-form-item',{attrs:{\"label\":\"邮箱\",\"prop\":\"email\"}},[_c('el-input',{model:{value:(_vm.addForm.email),callback:function ($$v) {_vm.$set(_vm.addForm, \"email\", $$v)},expression:\"addForm.email\"}})],1),_c('el-form-item',{attrs:{\"label\":\"手机\",\"prop\":\"mobile\"}},[_c('el-input',{model:{value:(_vm.addForm.mobile),callback:function ($$v) {_vm.$set(_vm.addForm, \"mobile\", $$v)},expression:\"addForm.mobile\"}})],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.addDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.addUser()}}},[_vm._v(\"确 定\")])],1)],1),_c('el-dialog',{attrs:{\"title\":\"修改用户信息\",\"visible\":_vm.EditDiglog,\"width\":\"50%\"},on:{\"update:visible\":function($event){_vm.EditDiglog=$event},\"close\":_vm.editDialogClose}},[_c('el-form',{ref:\"editFormRef\",attrs:{\"model\":_vm.editForm,\"rules\":_vm.editFormRule,\"label-width\":\"70px\"}},[_c('el-form-item',{attrs:{\"label\":\"用户名\"}},[_c('el-input',{attrs:{\"disabled\":\"\"},model:{value:(_vm.editForm.username),callback:function ($$v) {_vm.$set(_vm.editForm, \"username\", $$v)},expression:\"editForm.username\"}})],1),_c('el-form-item',{attrs:{\"label\":\"邮箱\",\"prop\":\"email\"}},[_c('el-input',{model:{value:(_vm.editForm.email),callback:function ($$v) {_vm.$set(_vm.editForm, \"email\", $$v)},expression:\"editForm.email\"}})],1),_c('el-form-item',{attrs:{\"label\":\"手机号\",\"prop\":\"mobile\"}},[_c('el-input',{model:{value:(_vm.editForm.mobile),callback:function ($$v) {_vm.$set(_vm.editForm, \"mobile\", $$v)},expression:\"editForm.mobile\"}})],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.EditDiglog = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.editUserInfo}},[_vm._v(\"确 定\")])],1)],1),_c('el-dialog',{attrs:{\"title\":\"分配角色\",\"visible\":_vm.setRoleDialogVisible,\"width\":\"30%\"},on:{\"update:visible\":function($event){_vm.setRoleDialogVisible=$event},\"close\":_vm.setRoleDialogClose}},[_c('div',[_c('p',[_vm._v(\"当前的用户:\"+_vm._s(_vm.usersInfos.username))]),_c('p',[_vm._v(\"当前的角色:\"+_vm._s(_vm.usersInfos.role_name))]),_c('p',[_vm._v(\" 分配新的角色: \"),_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.selectRoleId),callback:function ($$v) {_vm.selectRoleId=$$v},expression:\"selectRoleId\"}},_vm._l((_vm.rolesList),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.roleName,\"value\":item.id}})}),1)],1)]),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.setRoleDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.saveRoleInfo}},[_vm._v(\"确 定\")])],1)])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <!-- 面包屑导航 -->\r\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n      <el-breadcrumb-item :to=\"{ path: '/home' }\">首页</el-breadcrumb-item>\r\n      <el-breadcrumb-item>用户管理</el-breadcrumb-item>\r\n      <el-breadcrumb-item>用户列表</el-breadcrumb-item>\r\n    </el-breadcrumb>\r\n    <el-card class=\"box-card\">\r\n      <el-row :gutter=\"20\">\r\n        <el-col :span=\"8\">\r\n          <el-input\r\n            placeholder=\"请输入内容\"\r\n            v-model=\"usersInfo.query\"\r\n            clearable\r\n            @change=\"getUSerList()\"\r\n          >\r\n            <el-button\r\n              slot=\"append\"\r\n              icon=\"el-icon-search\"\r\n              @click=\"getUSerList()\"\r\n            ></el-button> </el-input\r\n        ></el-col>\r\n        <el-col :span=\"4\">\r\n          <el-button type=\"primary\" @click=\"addDialogVisible = true\"\r\n            >添加用户</el-button\r\n          ></el-col\r\n        >\r\n      </el-row>\r\n      <el-table :data=\"userList\" stripe border>\r\n        <el-table-column type=\"index\" label=\"#\"></el-table-column>\r\n        <el-table-column prop=\"username\" label=\"姓名\"></el-table-column>\r\n        <el-table-column prop=\"email\" label=\"邮箱\"></el-table-column>\r\n        <el-table-column prop=\"mobile\" label=\"电话\"></el-table-column>\r\n        <el-table-column prop=\"role_name\" label=\"角色\"></el-table-column>\r\n        <el-table-column label=\"状态\">\r\n          <template slot-scope=\"scope\">\r\n            <el-switch\r\n              v-model=\"scope.row.mg_state\"\r\n              @change=\"userStatusChange(scope.row)\"\r\n            >\r\n            </el-switch>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"操作\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button\r\n              type=\"primary\"\r\n              icon=\"el-icon-edit\"\r\n              size=\"mini\"\r\n              v-bind=\"scope.row\"\r\n              @click=\"showEditDialog(scope.row.id)\"\r\n            ></el-button>\r\n\r\n            <el-button\r\n              type=\"danger\"\r\n              icon=\"el-icon-delete\"\r\n              size=\"mini\"\r\n              @click=\"deleteUserInfo(scope.row.id)\"\r\n            ></el-button>\r\n            <el-tooltip\r\n              class=\"item\"\r\n              effect=\"dark\"\r\n              content=\"分配角色\"\r\n              placement=\"top\"\r\n              :enterable=\"false\"\r\n            >\r\n              <el-button\r\n                type=\"warning\"\r\n                icon=\"el-icon-setting\"\r\n                size=\"mini\"\r\n                @click=\"setRole(scope.row)\"\r\n              ></el-button>\r\n            </el-tooltip>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <el-pagination\r\n        @size-change=\"handleSizeChange\"\r\n        @current-change=\"handleCurrentChange\"\r\n        :current-page=\"usersInfo.pagenum\"\r\n        :page-sizes=\"[1, 2, 5, 10]\"\r\n        :page-size=\"usersInfo.pagesize\"\r\n        layout=\"total, sizes, prev, pager, next, jumper\"\r\n        :total=\"total\"\r\n      >\r\n      </el-pagination>\r\n    </el-card>\r\n    <!-- 添加用户弹窗 -->\r\n    <el-dialog\r\n      title=\"添加用户\"\r\n      :visible.sync=\"addDialogVisible\"\r\n      width=\"50%\"\r\n      @close=\"addDialogClose\"\r\n    >\r\n      <el-form\r\n        :model=\"addForm\"\r\n        :rules=\"addFormRules\"\r\n        ref=\"addRuleForm\"\r\n        label-width=\"70px\"\r\n      >\r\n        <el-form-item label=\"用户名\" prop=\"username\">\r\n          <el-input v-model=\"addForm.username\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"密码\" prop=\"password\">\r\n          <el-input v-model=\"addForm.password\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"邮箱\" prop=\"email\">\r\n          <el-input v-model=\"addForm.email\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"手机\" prop=\"mobile\">\r\n          <el-input v-model=\"addForm.mobile\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"addDialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"addUser()\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n    <!-- 修改用户信息弹窗 -->\r\n    <el-dialog\r\n      title=\"修改用户信息\"\r\n      :visible.sync=\"EditDiglog\"\r\n      width=\"50%\"\r\n      @close=\"editDialogClose\"\r\n    >\r\n      <el-form\r\n        :model=\"editForm\"\r\n        :rules=\"editFormRule\"\r\n        ref=\"editFormRef\"\r\n        label-width=\"70px\"\r\n      >\r\n        <el-form-item label=\"用户名\">\r\n          <el-input v-model=\"editForm.username\" disabled></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"邮箱\" prop=\"email\">\r\n          <el-input v-model=\"editForm.email\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"手机号\" prop=\"mobile\">\r\n          <el-input v-model=\"editForm.mobile\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"EditDiglog = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"editUserInfo\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n    <!-- 角色分配弹窗 -->\r\n\r\n    <el-dialog\r\n      title=\"分配角色\"\r\n      :visible.sync=\"setRoleDialogVisible\"\r\n      width=\"30%\"\r\n      @close=\"setRoleDialogClose\"\r\n    >\r\n      <div>\r\n        <p>当前的用户:{{ usersInfos.username }}</p>\r\n        <p>当前的角色:{{ usersInfos.role_name }}</p>\r\n        <p>\r\n          分配新的角色:\r\n          <el-select v-model=\"selectRoleId\" placeholder=\"请选择\">\r\n            <el-option\r\n              v-for=\"item in rolesList\"\r\n              :key=\"item.id\"\r\n              :label=\"item.roleName\"\r\n              :value=\"item.id\"\r\n            >\r\n            </el-option>\r\n          </el-select>\r\n        </p>\r\n      </div>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"setRoleDialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"saveRoleInfo\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  created() {\r\n    this.getUSerList();\r\n  },\r\n  data() {\r\n    // 添加用户的自定义校验规则\r\n    var checkEmail = (rule, value, cb) => {\r\n      const regEmail =\r\n        /^[A-Za-z0-9\\-_]+[A-Za-z0-9\\.\\-_]*[A-Za-z0-9\\-_]+@[A-Za-z0-9]+[A-Za-z0-9\\.\\-_]*(\\.[A-Za-z0-9\\.\\-_]+)*[A-Za-z0-9]+\\.[A-Za-z0-9]+[A-Za-z0-9\\.\\-_]*[A-Za-z0-9]+$/;\r\n      if (regEmail.test(value)) {\r\n        cb();\r\n      }\r\n      cb(new Error(\"请输入正确邮箱地址\"));\r\n    };\r\n    var checkMobile = (rule, value, cb) => {\r\n      const regMobile =\r\n        /^1(3[0-9]|4[01456879]|5[0-35-9]|6[2567]|7[0-8]|8[0-9]|9[0-35-9])\\d{8}$/;\r\n\r\n      if (regMobile.test(value)) {\r\n        cb();\r\n      }\r\n      cb(new Error(\"请输入正确手机号码\"));\r\n    };\r\n\r\n    return {\r\n      // 查询用户的请求参数\r\n      usersInfo: {\r\n        query: \"\",\r\n        pagenum: 1,\r\n        pagesize: 2,\r\n      },\r\n      userList: [],\r\n      total: 0,\r\n      // 添加用户的弹窗显示参数\r\n      addDialogVisible: false,\r\n      // 添加用户的表单信息\r\n      addForm: {\r\n        username: \"\",\r\n        password: \"\",\r\n        email: \"\",\r\n        mobile: \"\",\r\n      },\r\n      // 编辑用户的弹窗显示参数\r\n      EditDiglog: false,\r\n      // 添加用户的校验规则\r\n      addFormRules: {\r\n        username: [\r\n          { required: true, message: \"请输入用户名称\", trigger: \"blur\" },\r\n          {\r\n            min: 6,\r\n            max: 15,\r\n            message: \"长度在 6 到 15 个字符\",\r\n            trigger: \"blur\",\r\n          },\r\n        ],\r\n        password: [\r\n          { required: true, message: \"请输入用户密码\", trigger: \"blur\" },\r\n          {\r\n            min: 6,\r\n            max: 15,\r\n            message: \"长度在 6 到 15 个字符\",\r\n            trigger: \"blur\",\r\n          },\r\n        ],\r\n        email: [\r\n          { required: true, message: \"请输入邮箱\", trigger: \"blur\" },\r\n          {\r\n            validator: checkEmail,\r\n            trigger: \"blur\",\r\n          },\r\n        ],\r\n        mobile: [\r\n          { required: true, message: \"请输入手机号\", trigger: \"blur\" },\r\n          {\r\n            validator: checkMobile,\r\n            trigger: \"blur\",\r\n          },\r\n        ],\r\n      },\r\n      // 编辑的用户信息\r\n      editForm: {},\r\n      // 编辑用户信息校验规则\r\n      editFormRule: {\r\n        email: [\r\n          { required: true, message: \"请输入邮箱\", trigger: \"blur\" },\r\n          {\r\n            validator: checkEmail,\r\n            trigger: \"blur\",\r\n          },\r\n        ],\r\n        mobile: [\r\n          { required: true, message: \"请输入手机号\", trigger: \"blur\" },\r\n          {\r\n            validator: checkMobile,\r\n            trigger: \"blur\",\r\n          },\r\n        ],\r\n      },\r\n      // 用户分配角色弹窗\r\n      setRoleDialogVisible: false,\r\n      usersInfos: \"\",\r\n      rolesList: [],\r\n      selectRoleId: \"\",\r\n    };\r\n  },\r\n  methods: {\r\n    async getUSerList() {\r\n      const { data: res } = await this.$http.get(\"users\", {\r\n        params: this.usersInfo,\r\n      });\r\n      console.log(res);\r\n      if (res.meta.status !== 200) {\r\n        return this.$message(\"获取管理员列表失败\");\r\n      }\r\n      this.userList = res.data.users;\r\n\r\n      this.total = res.data.total;\r\n    },\r\n    // 分页器函数\r\n    handleSizeChange(newsize) {\r\n      console.log(newsize);\r\n      this.usersInfo.pagesize = newsize;\r\n      this.getUSerList();\r\n    },\r\n    handleCurrentChange(newcurrent) {\r\n      console.log(newcurrent);\r\n      this.usersInfo.pagenum = newcurrent;\r\n      this.getUSerList();\r\n    },\r\n    // 用户状态的改变\r\n    async userStatusChange(userInfo) {\r\n      const { data: res } = await this.$http\r\n        .put(`users/${userInfo.id}/state/${userInfo.mg_state}\r\n      \r\n`);\r\n      if (res.meta.status !== 200) {\r\n        userInfo.mg_state = !userInfo.mg_state;\r\n        return this.$message.error(\"更新用户状态失败\");\r\n      }\r\n      this.$message.success(\"用户状态更新成功\");\r\n    },\r\n    // 添加用户表单重置\r\n    addDialogClose() {\r\n      this.$refs.addRuleForm.resetFields();\r\n    },\r\n    // 添加成员\r\n    addUser() {\r\n      this.$refs.addRuleForm.validate(async (valid) => {\r\n        if (!valid) return;\r\n        const { data: res } = await this.$http.post(\"users\", this.addForm);\r\n        if (res.meta.status !== 201) {\r\n          this.$message.error(\"添加失败\");\r\n        }\r\n        this.$message.success(\"添加成功\");\r\n        this.addDialogVisible = false;\r\n        this.getUSerList();\r\n      });\r\n    },\r\n    // 获取成员信息\r\n    async showEditDialog(id) {\r\n      const { data: res } = await this.$http.get(`users/${id}`);\r\n      if (res.meta.status !== 200)\r\n        return this.$message.error(\"查询用户信息失败\");\r\n      this.editForm = res.data;\r\n      console.log(this.editForm);\r\n      this.EditDiglog = true;\r\n    },\r\n    editDialogClose() {\r\n      this.$refs.editFormRef.resetFields();\r\n    },\r\n    // 修改用户信息\r\n    editUserInfo() {\r\n      this.$refs.editFormRef.validate(async (vaild) => {\r\n        if (!vaild) return;\r\n        const { data: res } = await this.$http.put(\r\n          `users/${this.editForm.id}`,\r\n          {\r\n            email: this.editForm.email,\r\n            mobile: this.editForm.mobile,\r\n          }\r\n        );\r\n        if (res.meta.status !== 200) {\r\n          return this.$message.error(\"修改用户信息失败\");\r\n        }\r\n        this.EditDiglog = false;\r\n        this.getUSerList();\r\n        this.$message.success(\"用户信息修改成功\");\r\n      });\r\n    },\r\n    // 删除用户\r\n    async deleteUserInfo(id) {\r\n      const confirmResult = await this.$confirm(\r\n        \"此操作将永久删除该用户, 是否继续?\",\r\n        \"提示\",\r\n        {\r\n          confirmButtonText: \"确定\",\r\n          cancelButtonText: \"取消\",\r\n          type: \"warning\",\r\n        }\r\n      ).catch((err) => err);\r\n      if (confirmResult !== \"confirm\") {\r\n        return this.$message.info(\"已取消删除\");\r\n      }\r\n      const { data: res } = await this.$http.delete(`users/${id}`);\r\n      if (res.meta.status !== 200) {\r\n        this.$message.error(\"删除用户失败\");\r\n      }\r\n      this.getUSerList();\r\n      return this.$message.success(\"删除用户成功\");\r\n    },\r\n    // 分配角色\r\n    async setRole(userInfo) {\r\n      this.usersInfos = userInfo;\r\n      const { data: res } = await this.$http.get(\"roles\");\r\n      if (res.meta.status !== 200) {\r\n        this.$message.error(\"获取角色列表失败\");\r\n      }\r\n      this.rolesList = res.data;\r\n      this.setRoleDialogVisible = true;\r\n    },\r\n    async saveRoleInfo() {\r\n      if (!this.selectRoleId) {\r\n        this.$message.error(\"请选择需要更新角色\");\r\n      } else {\r\n        const { data: res } = await this.$http.put(\r\n          `users/${this.usersInfos.id}/role\r\n`,\r\n          { rid: this.selectRoleId }\r\n        );\r\n        console.log(res);\r\n        if (res.meta.status !== 200) {\r\n          if (res.meta.status === 400) {\r\n            this.$message.error(\"admin不可以更改\");\r\n          } else {\r\n            this.$message.error(\"角色更新失败\");\r\n          }\r\n        } else {\r\n          this.getUSerList();\r\n          this.$message.success(\"角色更新成功\");\r\n\r\n          this.setRoleDialogVisible = false;\r\n        }\r\n      }\r\n    },\r\n    setRoleDialogClose() {\r\n      (this.usersInfos = \"\"), (this.selectRoleId = \"\");\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./User.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./User.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./User.vue?vue&type=template&id=9f31c838&scoped=true&\"\nimport script from \"./User.vue?vue&type=script&lang=js&\"\nexport * from \"./User.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"9f31c838\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","attrs","path","_v","staticClass","on","$event","getUSerList","model","value","usersInfo","query","callback","$$v","$set","expression","slot","addDialogVisible","userList","scopedSlots","_u","key","fn","scope","userStatusChange","row","mg_state","_b","showEditDialog","id","deleteUserInfo","setRole","pagenum","pagesize","total","handleSizeChange","handleCurrentChange","addDialogClose","ref","addForm","addFormRules","username","password","email","mobile","addUser","EditDiglog","editDialogClose","editForm","editFormRule","editUserInfo","setRoleDialogVisible","setRoleDialogClose","_s","usersInfos","role_name","selectRoleId","_l","rolesList","item","roleName","saveRoleInfo","staticRenderFns","created","data","cb","required","message","trigger","min","max","validator","methods","params","put","userInfo","confirmButtonText","cancelButtonText","type","catch","err","rid","component"],"sourceRoot":""}