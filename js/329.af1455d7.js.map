{"version":3,"file":"js/329.af1455d7.js","mappings":"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","sources":["webpack://vue-shop/./src/components/goods/Add.vue","webpack://vue-shop/src/components/goods/Add.vue","webpack://vue-shop/./src/components/goods/Add.vue?66df","webpack://vue-shop/./src/components/goods/Add.vue?e325"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('el-breadcrumb',{attrs:{\"separator-class\":\"el-icon-arrow-right\"}},[_c('el-breadcrumb-item',{attrs:{\"to\":{ path: '/home' }}},[_vm._v(\"首页\")]),_c('el-breadcrumb-item',[_vm._v(\"商品管理\")]),_c('el-breadcrumb-item',[_vm._v(\"添加商品\")])],1),_c('el-card',[_c('el-alert',{attrs:{\"title\":\"添加商品信息\",\"type\":\"info\",\"show-icon\":\"\",\"closable\":false,\"center\":\"\"}}),_c('el-steps',{attrs:{\"space\":200,\"active\":_vm.activeIndex - 0,\"finish-status\":\"success\",\"align-center\":\"\"}},[_c('el-step',{attrs:{\"title\":\"基本信息\"}}),_c('el-step',{attrs:{\"title\":\"商品参数\"}}),_c('el-step',{attrs:{\"title\":\"商品属性\"}}),_c('el-step',{attrs:{\"title\":\"商品图片\"}}),_c('el-step',{attrs:{\"title\":\"商品内容\"}}),_c('el-step',{attrs:{\"title\":\"完成\"}})],1),_c('el-form',{ref:\"addFormRef\",staticStyle:{\"text-align\":\"left\"},attrs:{\"model\":_vm.addForm,\"rules\":_vm.addFormRule,\"label-width\":\"100px\",\"label-position\":\"top\"}},[_c('el-tabs',{attrs:{\"tab-position\":'left',\"before-leave\":_vm.beforeLeave},on:{\"tab-click\":_vm.tabChangeClick},model:{value:(_vm.activeIndex),callback:function ($$v) {_vm.activeIndex=$$v},expression:\"activeIndex\"}},[_c('el-tab-pane',{attrs:{\"label\":\"基本信息\",\"name\":\"0\"}},[_c('el-form-item',{attrs:{\"label\":\"商品名称\",\"prop\":\"goods_name\"}},[_c('el-input',{model:{value:(_vm.addForm.goods_name),callback:function ($$v) {_vm.$set(_vm.addForm, \"goods_name\", $$v)},expression:\"addForm.goods_name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"商品价格\",\"prop\":\"goods_price\"}},[_c('el-input',{attrs:{\"type\":\"number\"},model:{value:(_vm.addForm.goods_price),callback:function ($$v) {_vm.$set(_vm.addForm, \"goods_price\", $$v)},expression:\"addForm.goods_price\"}})],1),_c('el-form-item',{attrs:{\"label\":\"商品重量\",\"prop\":\"goods_weight\"}},[_c('el-input',{attrs:{\"type\":\"number\"},model:{value:(_vm.addForm.goods_weight),callback:function ($$v) {_vm.$set(_vm.addForm, \"goods_weight\", $$v)},expression:\"addForm.goods_weight\"}})],1),_c('el-form-item',{attrs:{\"label\":\"商品数量\",\"prop\":\"goods_number\"}},[_c('el-input',{attrs:{\"type\":\"number\"},model:{value:(_vm.addForm.goods_number),callback:function ($$v) {_vm.$set(_vm.addForm, \"goods_number\", $$v)},expression:\"addForm.goods_number\"}})],1),_c('el-form-item',{attrs:{\"label\":\"商品分类\",\"prop\":\"goods_cat\"}},[_c('el-cascader',{attrs:{\"options\":_vm.cateList,\"props\":_vm.cateProps},on:{\"change\":_vm.handleChange},model:{value:(_vm.addForm.goods_cat),callback:function ($$v) {_vm.$set(_vm.addForm, \"goods_cat\", $$v)},expression:\"addForm.goods_cat\"}})],1)],1),_c('el-tab-pane',{attrs:{\"label\":\"商品参数\",\"name\":\"1\"}},_vm._l((_vm.manyTableData),function(item){return _c('el-form-item',{key:item.attr_id,attrs:{\"label\":item.attr_name}},[_c('el-checkbox-group',{model:{value:(item.attr_vals),callback:function ($$v) {_vm.$set(item, \"attr_vals\", $$v)},expression:\"item.attr_vals\"}},_vm._l((item.attr_vals),function(cd,i){return _c('el-checkbox',{key:i,attrs:{\"label\":cd,\"border\":\"\"}})}),1)],1)}),1),_c('el-tab-pane',{attrs:{\"label\":\"商品属性\",\"name\":\"2\"}},_vm._l((_vm.onlyTableData),function(item){return _c('el-form-item',{key:item.attr_id,attrs:{\"label\":item.attr_name}},[_c('el-input',{model:{value:(item.attr_vals),callback:function ($$v) {_vm.$set(item, \"attr_vals\", $$v)},expression:\"item.attr_vals\"}})],1)}),1),_c('el-tab-pane',{attrs:{\"label\":\"商品图片\",\"name\":\"3\"}},[_c('el-upload',{staticClass:\"upload-demo\",attrs:{\"action\":\"http://127.0.0.1:8888/api/private/v1/upload\",\"on-preview\":_vm.handlePreview,\"on-remove\":_vm.handleRemove,\"list-type\":\"picture\",\"headers\":_vm.headersObj,\"on-success\":_vm.onSuccess}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"}},[_vm._v(\"点击上传\")])],1)],1),_c('el-tab-pane',{attrs:{\"label\":\"商品内容\",\"name\":\"4\"}},[_c('quill-editor',{model:{value:(_vm.addForm.goods_introduce),callback:function ($$v) {_vm.$set(_vm.addForm, \"goods_introduce\", $$v)},expression:\"addForm.goods_introduce\"}}),_c('el-button',{staticClass:\"introduceBtn\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.add}},[_vm._v(\"添加商品\")])],1)],1)],1)],1),_c('el-dialog',{attrs:{\"title\":\"图片预览\",\"visible\":_vm.previewdialogVisible,\"width\":\"50%\"},on:{\"update:visible\":function($event){_vm.previewdialogVisible=$event}}},[_c('img',{staticStyle:{\"width\":\"100%\"},attrs:{\"src\":_vm.previewPath,\"alt\":\"\"}})])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <!-- 面包屑 -->\r\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n      <el-breadcrumb-item :to=\"{ path: '/home' }\">首页</el-breadcrumb-item>\r\n      <el-breadcrumb-item>商品管理</el-breadcrumb-item>\r\n      <el-breadcrumb-item>添加商品</el-breadcrumb-item>\r\n    </el-breadcrumb>\r\n    <el-card>\r\n      <!-- 警告标签 -->\r\n      <el-alert\r\n        title=\"添加商品信息\"\r\n        type=\"info\"\r\n        show-icon\r\n        :closable=\"false\"\r\n        center\r\n      >\r\n      </el-alert>\r\n      <!-- 步骤条区域 -->\r\n      <el-steps\r\n        :space=\"200\"\r\n        :active=\"activeIndex - 0\"\r\n        finish-status=\"success\"\r\n        align-center\r\n      >\r\n        <el-step title=\"基本信息\"></el-step>\r\n        <el-step title=\"商品参数\"></el-step>\r\n        <el-step title=\"商品属性\"></el-step>\r\n        <el-step title=\"商品图片\"></el-step>\r\n        <el-step title=\"商品内容\"></el-step>\r\n        <el-step title=\"完成\"></el-step>\r\n      </el-steps>\r\n      <!-- tag标签 -->\r\n      <el-form\r\n        :model=\"addForm\"\r\n        :rules=\"addFormRule\"\r\n        ref=\"addFormRef\"\r\n        label-width=\"100px\"\r\n        label-position=\"top\"\r\n        style=\"text-align: left\"\r\n      >\r\n        <el-tabs\r\n          :tab-position=\"'left'\"\r\n          v-model=\"activeIndex\"\r\n          :before-leave=\"beforeLeave\"\r\n          @tab-click=\"tabChangeClick\"\r\n        >\r\n          <el-tab-pane label=\"基本信息\" name=\"0\">\r\n            <el-form-item label=\"商品名称\" prop=\"goods_name\">\r\n              <el-input v-model=\"addForm.goods_name\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"商品价格\" prop=\"goods_price\">\r\n              <el-input v-model=\"addForm.goods_price\" type=\"number\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"商品重量\" prop=\"goods_weight\">\r\n              <el-input v-model=\"addForm.goods_weight\" type=\"number\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"商品数量\" prop=\"goods_number\">\r\n              <el-input v-model=\"addForm.goods_number\" type=\"number\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"商品分类\" prop=\"goods_cat\">\r\n              <el-cascader\r\n                v-model=\"addForm.goods_cat\"\r\n                :options=\"cateList\"\r\n                :props=\"cateProps\"\r\n                @change=\"handleChange\"\r\n              ></el-cascader>\r\n            </el-form-item>\r\n          </el-tab-pane>\r\n          <el-tab-pane label=\"商品参数\" name=\"1\">\r\n            <el-form-item\r\n              v-for=\"item in manyTableData\"\r\n              :key=\"item.attr_id\"\r\n              :label=\"item.attr_name\"\r\n            >\r\n              <el-checkbox-group v-model=\"item.attr_vals\">\r\n                <el-checkbox\r\n                  :label=\"cd\"\r\n                  v-for=\"(cd, i) in item.attr_vals\"\r\n                  :key=\"i\"\r\n                  border\r\n                ></el-checkbox> </el-checkbox-group\r\n            ></el-form-item>\r\n          </el-tab-pane>\r\n          <el-tab-pane label=\"商品属性\" name=\"2\">\r\n            <el-form-item\r\n              v-for=\"item in onlyTableData\"\r\n              :key=\"item.attr_id\"\r\n              :label=\"item.attr_name\"\r\n            >\r\n              <el-input v-model=\"item.attr_vals\"></el-input\r\n            ></el-form-item>\r\n          </el-tab-pane>\r\n          <el-tab-pane label=\"商品图片\" name=\"3\">\r\n            <el-upload\r\n              class=\"upload-demo\"\r\n              action=\"http://127.0.0.1:8888/api/private/v1/upload\"\r\n              :on-preview=\"handlePreview\"\r\n              :on-remove=\"handleRemove\"\r\n              list-type=\"picture\"\r\n              :headers=\"headersObj\"\r\n              :on-success=\"onSuccess\"\r\n            >\r\n              <el-button size=\"small\" type=\"primary\">点击上传</el-button>\r\n            </el-upload>\r\n          </el-tab-pane>\r\n          <el-tab-pane label=\"商品内容\" name=\"4\">\r\n            <quill-editor v-model=\"addForm.goods_introduce\"></quill-editor>\r\n            <el-button type=\"primary\" class=\"introduceBtn\" @click=\"add\"\r\n              >添加商品</el-button\r\n            >\r\n          </el-tab-pane>\r\n        </el-tabs>\r\n      </el-form>\r\n    </el-card>\r\n    <el-dialog\r\n      title=\"图片预览\"\r\n      :visible.sync=\"previewdialogVisible\"\r\n      width=\"50%\"\r\n    >\r\n      <img :src=\"previewPath\" alt=\"\" style=\"width: 100%\" />\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport _ from \"lodash\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      activeIndex: \"0\",\r\n      addForm: {\r\n        goods_name: \"\",\r\n        goods_price: 0,\r\n        goods_weight: 0,\r\n        goods_number: 0,\r\n        goods_cat: [],\r\n        pics: [],\r\n        goods_introduce: \"\",\r\n        attrs: [],\r\n      },\r\n      addFormRule: {\r\n        goods_name: [\r\n          { required: true, message: \"请输入商品名称\", trigger: \"blur\" },\r\n        ],\r\n        goods_price: [\r\n          { required: true, message: \"请输入商品价格\", trigger: \"blur\" },\r\n        ],\r\n        goods_weight: [\r\n          { required: true, message: \"请输入商品重量\", trigger: \"blur\" },\r\n        ],\r\n        goods_number: [\r\n          { required: true, message: \"请输入商品数量\", trigger: \"blur\" },\r\n        ],\r\n        goods_cat: [\r\n          { required: true, message: \"请输入商品分类\", trigger: \"blur\" },\r\n        ],\r\n      },\r\n      cateList: [],\r\n      cateProps: {\r\n        expandTrigger: \"hover\",\r\n        label: \"cat_name\",\r\n        value: \"cat_id\",\r\n        children: \"children\",\r\n      },\r\n      manyTableData: [],\r\n      onlyTableData: [],\r\n      headersObj: {\r\n        Authorization: sessionStorage.getItem(\"token\"),\r\n      },\r\n      previewPath: \"\",\r\n      previewdialogVisible: false,\r\n    };\r\n  },\r\n  created() {\r\n    this.getCateList();\r\n  },\r\n  methods: {\r\n    async getCateList() {\r\n      const { data: res } = await this.$http.get(\"categories\");\r\n      if (res.meta.status !== 200) {\r\n        return this.$message.error(\"获取商品分类失败\");\r\n      } else {\r\n        this.cateList = res.data;\r\n        console.log(this.cateList);\r\n      }\r\n    },\r\n    handleChange() {\r\n      console.log(this.addForm.goods_cat);\r\n      if (this.addForm.goods_cat.length !== 3) {\r\n        this.addForm.goods_cat = [];\r\n      }\r\n    },\r\n    beforeLeave(activeName, oldActiveName) {\r\n      if (oldActiveName === \"0\" && this.addForm.goods_cat.length !== 3) {\r\n        this.$message.error(\"请先选择商品分类\");\r\n        return false;\r\n      }\r\n    },\r\n    async tabChangeClick() {\r\n      console.log(this.activeIndex);\r\n      if (this.activeIndex === \"1\") {\r\n        const { data: res } = await this.$http.get(\r\n          `categories/${this.cateId}/attributes`,\r\n          { params: { sel: \"many\" } }\r\n        );\r\n        if (res.meta.status !== 200) {\r\n          this.$message.error(\"获取参数失败\");\r\n        } else {\r\n          res.data.forEach((item) => {\r\n            item.attr_vals =\r\n              item.attr_vals.length === 0 ? [] : item.attr_vals.split(\",\");\r\n          });\r\n          this.manyTableData = res.data;\r\n          console.log(this.manyTableData);\r\n        }\r\n      } else if (this.activeIndex === \"2\") {\r\n        const { data: res } = await this.$http.get(\r\n          `categories/${this.cateId}/attributes`,\r\n          { params: { sel: \"only\" } }\r\n        );\r\n        if (res.meta.status !== 200) {\r\n          this.$message.error(\"获取属性失败\");\r\n        } else {\r\n          this.onlyTableData = res.data;\r\n          console.log(this.onlyTableData);\r\n        }\r\n      }\r\n    },\r\n    // 图片详情触发事件\r\n    handlePreview(file) {\r\n      this.previewPath = file.response.data.url;\r\n      this.previewdialogVisible = true;\r\n    },\r\n    // 图片移除触发事件\r\n    handleRemove(file) {\r\n      console.log(file);\r\n      const filePath = file.response.data.tmp_path;\r\n      const i = this.addForm.pics.findIndex((item) => {\r\n        return item.pic === filePath;\r\n      });\r\n      console.log(i);\r\n      this.addForm.pics.splice(i, 1);\r\n      console.log(this.addForm.pics);\r\n    },\r\n    onSuccess(response) {\r\n      const picObject = { pic: response.data.tmp_path };\r\n      this.addForm.pics.push(picObject);\r\n      console.log(this.addForm.pics);\r\n    },\r\n    add() {\r\n      this.$refs.addFormRef.validate(async (vali) => {\r\n        if (!vali) {\r\n          this.$message.error(\"请填写必要参数\");\r\n        } else {\r\n          const form = _.cloneDeep(this.addForm);\r\n          form.goods_cat = form.goods_cat.join(\",\");\r\n          // 处理动态参数\r\n          this.manyTableData.forEach((item) => {\r\n            const newInfo = {\r\n              attr_id: item.attr_id,\r\n              attr_value: item.attr_vals.join(\" \"),\r\n            };\r\n            this.addForm.attrs.push(newInfo);\r\n          });\r\n          this.onlyTableData.forEach((item) => {\r\n            const newInfo = {\r\n              attr_id: item.attr_id,\r\n              attr_value: item.attr_vals,\r\n            };\r\n            this.addForm.attrs.push(newInfo);\r\n          });\r\n          form.attrs = this.addForm.attrs;\r\n          const { data: res } = await this.$http.post(\"goods\", form);\r\n          if (res.meta.status !== 201) {\r\n            this.$message.error(\"添加商品失败\");\r\n          }\r\n          this.$message.success(\"商品添加成功\");\r\n          this.$router.push(\"/goods\");\r\n          console.log(form);\r\n        }\r\n      });\r\n      console.log(this.addForm);\r\n    },\r\n  },\r\n  computed: {\r\n    cateId() {\r\n      if (this.addForm.goods_cat.length === 3) {\r\n        return this.addForm.goods_cat[2];\r\n      } else {\r\n        return null;\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.el-checkbox {\r\n  margin: 0 5px 0 0;\r\n}\r\n.introduceBtn {\r\n  margin-top: 15px;\r\n}\r\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Add.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Add.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Add.vue?vue&type=template&id=6ce82515&scoped=true&\"\nimport script from \"./Add.vue?vue&type=script&lang=js&\"\nexport * from \"./Add.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Add.vue?vue&type=style&index=0&id=6ce82515&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6ce82515\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","attrs","path","_v","activeIndex","ref","staticStyle","addForm","addFormRule","beforeLeave","on","tabChangeClick","model","value","callback","$$v","expression","goods_name","$set","goods_price","goods_weight","goods_number","cateList","cateProps","handleChange","goods_cat","_l","manyTableData","item","key","attr_id","attr_name","attr_vals","cd","i","onlyTableData","staticClass","handlePreview","handleRemove","headersObj","onSuccess","goods_introduce","add","previewdialogVisible","$event","previewPath","staticRenderFns","data","pics","required","message","trigger","expandTrigger","label","children","Authorization","created","methods","params","sel","res","pic","form","attr_value","computed","cateId","component"],"sourceRoot":""}